# Redis configuration for AOF persistence with fsync every second

# Enable AOF persistence
appendonly yes

# AOF filename
appendfilename "appendonly.aof"

# Fsync policy: fsync every second
# Options: always, everysec, no
appendfsync everysec

# Disable fsync when rewriting AOF to avoid blocking
no-appendfsync-on-rewrite no

# Auto-rewrite AOF when it grows too large
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

# Enable both AOF and RDB for maximum safety
# RDB provides faster restarts, AOF provides better durability
save 900 1
save 300 10  
save 60 10000

# AOF loading behavior
aof-load-truncated yes

# Enable mixed persistence (RDB+AOF) - available in Redis 4.0+
aof-use-rdb-preamble yes

# Directory for persistence files
dir /data

# Logging
loglevel notice
logfile ""
